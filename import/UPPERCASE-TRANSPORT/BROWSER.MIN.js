global.CONNECT_TO_WEB_SOCKET_SERVER=METHOD({run:function(o,n){"use strict";var t,e,E,a,i,d,_,c,C=void 0===o.host?BROWSER_CONFIG.host:o.host,r=o.port,s={},u=0;CHECK_IS_DATA(n)!==!0?t=n:(t=n.success,e=n.error),c=function(o,n,t){var e=s[o];void 0!==e&&EACH(e,function(o){o(n,function(o){void 0!==_&&void 0!==t&&_({methodName:"__CALLBACK_"+t,data:o})})})},E=new WebSocket("ws://"+C+":"+r),E.onopen=function(){a=!0,t(i=function(o,n){var t=s[o];void 0===t&&(t=s[o]=[]),t.push(n)},d=function(o,n){var t=s[o];void 0!==t&&(void 0!==n?REMOVE({array:t,value:n}):delete s[o])},_=function(o,n){var t;E.send(STRINGIFY({methodName:o.methodName,data:o.data,sendKey:u})),void 0!==n&&(t="__CALLBACK_"+u,i(t,function(o){n(o),d(t)})),u+=1},function(){E.close()})},E.onmessage=function(o){var n=PARSE_STR(o.data);void 0!==n&&c(n.methodName,n.data,n.sendKey)},E.onclose=function(){c("__DISCONNECTED")},E.onerror=function(o){var n=o.toString();a!==!0?void 0!==e?e(n):console.log("[UPPERCASE-CONNECT_TO_WEB_SOCKET_SERVER] CONNECT TO WEB SOCKET SERVER FAILED: "+n):c("__ERROR",n)}}});